name: Close Stale Issues and PRs

on:
  schedule:
    - cron: '0 0 * * *' # Run daily at midnight

jobs:
  stale:
    runs-on: ubuntu-latest

    permissions:
      issues: write
      pull-requests: write

    steps:
    - uses: actions/stale@v9
      with:
        repo-token: ${{ secrets.GITHUB_TOKEN }}

        # Issues
        days-before-issue-stale: 60
        days-before-issue-close: 14
        stale-issue-label: 'stale'
        stale-issue-message: |
          This issue has been automatically marked as stale because it has not had recent activity.
          It will be closed in 14 days if no further activity occurs.
          Thank you for your contributions.
        close-issue-message: |
          This issue has been automatically closed due to inactivity.
          If you believe this issue is still relevant, please reopen it or create a new issue.

        # Pull Requests
        days-before-pr-stale: 30
        days-before-pr-close: 14
        stale-pr-label: 'stale'
        stale-pr-message: |
          This pull request has been automatically marked as stale because it has not had recent activity.
          It will be closed in 14 days if no further activity occurs.
          Please update this PR or respond if you'd like to keep it open.
        close-pr-message: |
          This pull request has been automatically closed due to inactivity.
          If you'd like to continue working on this, please reopen the PR or create a new one.

        # Exemptions
        exempt-issue-labels: 'enhancement,bug,help-wanted,good-first-issue'
        exempt-pr-labels: 'work-in-progress,blocked'
        exempt-milestones: true
